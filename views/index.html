<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Virtual Morse Relay</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon">
  <link rel='stylesheet' href='//fonts.googleapis.com/css?family=font1|font2|etc' type='text/css'>
  <link rel="stylesheet" href="stylesheets/style.css" type="text/css">
  </head>
  <body>
  
   <input type="image" id="Clicker" src="/images/button.png">
   <img src="/images/lightoff.png" id="Light" alt="LightBulb" width="50" height="50">

   <div id="contents">centered at bottom</div>
   </div>
	
   <textarea rows="10" cols="50" id="Ticker" readonly>
   </textarea>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>
  <script src='http://code.jquery.com/jquery-latest.min.js' type='text/javascript'></script>
  <script src='/javascripts/jquery.longclick-1.0.min.js' type='text/javascript'></script>
   <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
	var socket = io();
	var myVar;
	
	function addText(elId,text) {
    document.getElementById(elId).value += text;
    }
	
	function appendSpace() {
    socket.emit('morse signal', "/");
    }
	
	$( document).ready( function() {
    $( '#Clicker').mayTriggerLongClicks( {
	delay: 150
    } ).on( 'longClick', function() {
	$( '#contents').html( 'Long-clicked on button ' + $( this).attr( 'id') );
	socket.emit('morse signal', "-");
    } ).on( 'click', function() {
	$( '#contents').html( 'Short-clicked on button ' + $( this).attr( 'id') );
	socket.emit('morse signal', ".");
    } );
	
	socket.on('morse signal', function(msg){
	addText('Ticker',msg);
    });
	

	$('#Clicker').mousedown(function () {
    var src = "http://192.168.1.117:3000/images/lighton.png";
    $('#Light').attr("src", src);
	clearTimeout(myVar);
    return false;
    });
    $('#Clicker').mouseup(function () {
    myVar = setTimeout(appendSpace, 500);
    var src = "http://192.168.1.117:3000/images/lightoff.png";
    $("#Light").attr("src", src);
    return false;
    });
    $('#Clicker').mouseout(function () {

    var src = "http://192.168.1.117:3000/images/lightoff.png";
    $("#Light").attr("src", src);
    return false;
    });
    });
  </script>
   </body>
</html>